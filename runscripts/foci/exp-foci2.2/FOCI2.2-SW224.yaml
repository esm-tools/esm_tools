# nesh only
# It is currently under investigation whether the extra
# #SBATCH flags below improve model performance
# Sebastian Wahl 05/2021
# uncomment below if you run on nesh at CAU
#computer:
#   additional_flags:
#      - --mem=72000
#      - --constraint="cascade"

general:
   
   # machine specific setup 
   # nesh: comment account
   account: shk00057
   base_dir: ${homedir}/esm/esm-experiments/

   use_venv: False
   verbose: False
   setup_name: "foci"
   version: "fs_oasismct4"
   homedir: !ENV ${HOME}

   compute_time: "01:30:00"
   initial_date: "1850-01-01T00:00:00"       # Initial exp. date
   final_date: "2014-01-01T00:00:00"         # Final date of the experiment
   postprocessing: true
   scenario: "cmip6hist" 
   nmonth: 12
   clean_runs: 2

   lresume: True
   ini_parent_exp_id: "FOCI2.2-SW220"
   ini_parent_date: "26991231"
   ini_nemo_restart_steps: 14901888
   ini_parent_dir: "${base_dir}/${ini_parent_exp_id}/restart"

foci:
   model_dir: ${general.homedir}/esm/models/foci-fs_oasismct4/

echam:
   resolution: "T63"
   lresume: ${general.lresume}
   restart_rate: ${general.nmonth}
   restart_unit: "months"
   scenario: ${general.scenario}
   nproca: 24
   nprocb: 24
   # parallel I/O, off by default
   #nprocio: 6
   namelist_changes:
      namelist.echam:
          runctl:
             nproma: 8
   #      parctl:
   #         iomode: 2 
   #         nprocio: ${nprocio}
   
nemo:
   pre_run_commands: "cp -f ~/FOCI2.2-SW221_hostfile ${work_dir}/hostfile_srun"
   global_tag: ""
   choose_lresume:
      true:
         choose_general.run_number:
            1:
               global_tag: ""
   resolution: "ORCA05"
   version: "ORCA05_LIM2_KCM_AOW_FS_OASISMCT4"
   jpni: 24
   jpnj: 24
   nproca: 24
   nprocb: 24
   nproc: 576
   add_namelist_changes:
       namelist_cfg:
           namtra_ldf:
               rn_aht_0: 600
               rn_aeiv_scale: 0.5
           namdyn_ldf:
               rn_cmsmag_2: 4
           namsbc_cpl:
               sn_rcv_rnf: ['none', 'no', '', '', '']
               sn_rcv_emp: ['kcm_lim_2', 'no', '', '', '']
   
xios:
   nproc: 12
