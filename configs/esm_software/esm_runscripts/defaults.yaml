# ESM-Runscripts defaults

# Defaults added to the general section
general:
    additional_files: []
    iterative_coupled_model: ""
    reset_calendar_to_last: False
    verbose: False

# Defaults to be added to each model or component
per_model_defaults:
    file_movements:
        default:
            all_directions: copy
        bin:
            init_to_exp:    copy
            exp_to_run:     copy
            run_to_work:    copy
            work_to_run:    copy

workflow:
    user_phases: None
    default_cluster: sim_cluster
    clusters:
        sim_cluster:
            first_task_in_queue: prepcompute
            last_task_in_queue: tidy
            next_run_triggered_by: tidy
            phases:
                - prepcompute
                - compute
                - tidy
                - restart

    phases:
        prepcompute:
            phase_type: SimulationSetup
            called_from: tidy
            cluster: sim_cluster
            name: prepcompute
            next_submit:
                - compute
            nproc: 1
            order_in_cluster: sequential
            run_after: tidy
            run_before: compute
        compute:
            phase_type: compute
            called_from: prepcompute
            cluster: sim_cluster
            name: compute
            next_submit:
                - tidy
            #nproc: None
            nproc: 1
            order_in_cluster: sequential
            run_after: prepcompute
            run_before: tidy
            #run_on_queue: ${computer.partitions.pp.name}
        tidy:
            phase_type: SimulationSetup
            called_from: compute
            cluster: sim_cluster
            name: tidy
            next_submit:
                - restart
            nproc: 1
            order_in_cluster: sequential
            run_after: compute
            run_before: restart
        restart:
            phase_type: SimulationSetup
            called_from: tidy
            cluster: sim_cluster
            name: restart
            next_submit:
                - prepcompute
            nproc: 1
            order_in_cluster: sequential
            run_after: tidy
            run_before: prepcompute
